apiDict = require '../config/tuyaAtopDict'
Atop = require '../src/atopTuya'
should = require 'should'
config =
  "atop":
    "host": "http://192.168.0.19:7002/atop/api.json"
    # "host": "http://a.cn.wgine.com/do.html"
    # "appkey": "d9d6ea95d03a0171afe92cea164276d4"
    # "appkey": "e19e177c0f8354659e59a96276efed93"
    "appkey":"236f7c80b1588f1a7a5aecda586110b7"
  "memcached":
    "host": "192.168.0.18"
    "port": "11211"
    "lifetime": 21600
  "static":
    "host": ["http://localhost:8080"]
    "apiHost": "http://a.cn.wgine.com/a.json"
  "oss":
    "host": "http://oss.airtakeapp.com"
    "downUrl": "http://d.cn.wgine.com/down"
    "ossImgUrl": "http://dc.airtakeapp.com"
    "ossZipUrl": "http://airtake-private-data.oss-cn-hangzhou.aliyuncs.com"
    "ossAccessKeyId": "tOTm6DnP0Jy7IE9U"
    "bucket": "wgine"
    "dir": "00/21/0021"
    "expires": 3600
  "auth":
    "wxappid": "wxb5c5ef104823bb81"
    "wxauthhost": "https://open.weixin.qq.com/connect/qrconnect"
    "wxredirecturi": "http://oa.airtakeapp.com/OauthWxCallback.do"
    "qqappid": "101189711"
    "qqauthhost": "https://graph.qq.com/oauth2.0/authorize"
    "qqredirecturi": "http://oa.airtakeapp.com/OauthQqCallback.do"
  "uid": ""
  "region": "AY"
  "portalAtop":
    "host": "http://192.168.0.19:7002/atop/api.json"
    "appkey":"236f7c80b1588f1a7a5aecda586110b7"


atop = new Atop({conf:config.portalAtop, atopAPIDict: apiDict})
# console.log JSON.stringify atop
# atop.atopRequest('getShare', {postData: {hash: 'aBqOetPstC'}}).thxen (data)->
#   console.log data
postData =
  fullName: 'duian'
  emailAddress: 'zhou@sina.cim'
  subject: 'good project'
  message: 'msg'

describe "tuyaAtop", ()->
  describe 'send feedback', ()->
    it "feedback", (done) ->
      atop.atopRequest('feedback', {postData}, 'en').then (data)->

        # console.log data
        data.should.equal 1
        done()



